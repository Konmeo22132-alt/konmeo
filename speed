(() => {
    // TƒÉng t·ªëc th·ªùi gian g·∫•p 10 l·∫ßn cho c√°c thao t√°c cu·ªôn trang, gi·ªØ nguy√™n th·ªùi gian ch·ªù
    const originalNow = Date.now;
    const start = originalNow();

    Date.now = () => start + (originalNow() - start) * 8;  // TƒÉng t·ªëc ch·∫≠m h∆°n, g·∫•p 5 l·∫ßn

    const originalSetTimeout = window.setTimeout;
    window.setTimeout = (cb, delay, ...args) => originalSetTimeout(cb, delay / 5 + Math.random() * 50, ...args);  // Th√™m ƒë·ªô tr·ªÖ ng·∫´u nhi√™n

    const originalSetInterval = window.setInterval;
    window.setInterval = (cb, delay, ...args) => originalSetInterval(cb, delay / 5 + Math.random() * 50, ...args);  // Th√™m ƒë·ªô tr·ªÖ ng·∫´u nhi√™n

    console.log(
        "%cüéâ Bypass yeumoney by Konmeo Hub üéâ\\n%cDiscord: @konmeo22132 | discord.gg/huneipa\\nYouTube: https://youtube.com/@huneee205",
        "color: white; font-size: 16px; font-weight: bold;",
        "color: orange; font-size: 13px; font-weight: bold;"
    );

    const delay = ms => new Promise(res => setTimeout(res, ms));
    
    let foundCode = false;  // Flag to check if a code has been found

    async function autoRun() {
        const scrollStep = 100;
        const scrollDelay = 1000;  // Th·ªùi gian cu·ªôn ch·∫≠m h∆°n m·ªôt ch√∫t ƒë·ªÉ tr√¥ng t·ª± nhi√™n

        // Cu·ªôn trang cho ƒë·∫øn cu·ªëi
        while (window.scrollY + window.innerHeight < document.body.scrollHeight) {
            window.scrollBy(0, scrollStep);
            await delay(scrollDelay + Math.random() * 100);  // Th√™m ƒë·ªô tr·ªÖ ng·∫´u nhi√™n v√†o vi·ªác cu·ªôn
        }

        await delay(1500);  // Gi·∫£m th·ªùi gian ch·ªù tr∆∞·ªõc khi b·∫•m n√∫t

        // Click v√†o n√∫t "L·∫§Y M√É"
        const layMaBtn = document.getElementById("layma_me_vuatraffic");
        if (layMaBtn) {
            layMaBtn.click();
            console.log("%c[Konmeo Hub] ‚úÖ ƒê√£ click n√∫t 'L·∫§Y M√É'", "color: #00ff00; font-weight: bold;");
        }

        await delay(15000); // Ch·ªù 15 gi√¢y

        // H√†m t√¨m v√† click v√†o c√°c li√™n k·∫øt h·ª£p l·ªá
        const findAndClick = async () => {
            if (foundCode) return; // D·ª´ng l·∫°i n·∫øu ƒë√£ t√¨m th·∫•y m√£

            const clickBtn = document.querySelector("#layma_me_vuatraffic.getcodebtn.cursor-pointer");
            if (clickBtn && clickBtn.textContent.includes("VUI L√íNG CLICK")) {
                console.log("%c[Konmeo Hub] üîç Ph√°t hi·ªán y√™u c·∫ßu click. ƒê·ª£i 5s...", "color: yellow;");
                await delay(5000);

                // T√¨m c√°c li√™n k·∫øt h·ª£p l·ªá
                const validLinks = Array.from(document.querySelectorAll("a[href]")).filter(link => {
                    const href = link.getAttribute("href");
                    const rect = link.getBoundingClientRect();
                    return (
                        href &&
                        !href.includes("#") &&
                        rect.width > 0 &&
                        rect.height > 0
                    );
                });

                if (validLinks.length > 0) {
                    validLinks[0].click();
                    console.log("%c[Konmeo Hub] üîó ƒê√£ click v√†o link: " + validLinks[0].href, "color: cyan;");
                } else {
                    console.log("%c[Konmeo Hub] ‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y link h·ª£p l·ªá.", "color: orange;");
                }
            } else {
                console.log("%c[Konmeo Hub] ‚åö Kh√¥ng th·∫•y n√∫t 'VUI L√íNG CLICK', th·ª≠ l·∫°i sau 5s", "color: lightblue;");
                setTimeout(findAndClick, 5000);
            }
        };

        // Ki·ªÉm tra m√£ m·ªói 5s
        setInterval(() => {
            if (foundCode) return; // N·∫øu ƒë√£ t√¨m th·∫•y m√£, d·ª´ng l·∫°i

            const all = document.querySelectorAll("#layma_me_vuatraffic");
            all.forEach(span => {
                const txt = span.textContent.trim();
                if (/^\d{6}$/.test(txt)) {
                    console.log(`%c[Konmeo Hub] ‚ùó T√¨m th·∫•y m√£ : ${txt}`, "color: #ff69b4; font-weight: bold; font-size: 14px");
                    foundCode = true;  // ƒê√°nh d·∫•u ƒë√£ t√¨m th·∫•y m√£
                }
            });
        }, 5000); // Ki·ªÉm tra m√£ m·ªói 5s

        findAndClick();
    }

    autoRun();
})();
