(() => {
    let scrollSpeedSlow = false;

    const originalNow = Date.now;
    const start = originalNow();

    // Gi·ªØ th·ªùi gian x5 m√£i m√£i
    Date.now = function () {
        return start + (originalNow() - start) * 5;
    };

    const originalSetTimeout = window.setTimeout;
    window.setTimeout = function (cb, delay) {
        return originalSetTimeout(cb, delay / 5);
    };

    const originalSetInterval = window.setInterval;
    window.setInterval = function (cb, delay) {
        return originalSetInterval(cb, delay / 5);
    };

    // Thay ƒë·ªïi t·ªëc ƒë·ªô cu·ªôn ng·∫´u nhi√™n theo chu k·ª≥
    setInterval(() => {
        scrollSpeedSlow = true;
        console.log("%c[Konmeo Hub] ‚ùå ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô cu·ªôn ƒë·ªÉ tr√°nh b·ªã ph√°t hi·ªán.", "color: red; font-weight: bold;");

        setTimeout(() => {
            scrollSpeedSlow = false;
            console.log("%c[Konmeo Hub] ‚úÖ Quay l·∫°i t·ªëc ƒë·ªô cu·ªôn b√¨nh th∆∞·ªùng.", "color: lime; font-weight: bold;");
        }, 3000 + Math.random() * 3000); // ch·∫≠m 3-6s
    }, 15000 + Math.random() * 10000); // m·ªói 15-25s

    console.log(
        "%cüéâ Bypass Link4m by Konmeo Hub üéâ\n%cDiscord: @konmeo22132 | discord.gg/huneipa\nYouTube: https://youtube.com/@huneee205",
        "color: white; font-size: 16px; font-weight: bold;",
        "color: orange; font-size: 13px; font-weight: bold;"
    );

    const delay = ms => new Promise(res => setTimeout(res, ms));
    let foundCode = false;

    async function autoRun() {
        console.log("%c[Konmeo Hub] üö® ƒêang k√©o xu·ªëng, vui l√≤ng kh√¥ng can thi·ªáp ƒë·ªÉ tr√°nh l·ªói", "color: red; font-weight: bold;");

        while (window.scrollY + window.innerHeight < document.body.scrollHeight) {
            const step = Math.floor(Math.random() * 100) + 50;
            const baseDelay = scrollSpeedSlow ? 80 : 25;
            const delayTime = Math.floor(Math.random() * 40) + baseDelay;

            window.scrollBy(0, step);
            await delay(delayTime);
        }

        console.log("%c[Konmeo Hub] ‚úÖ ƒê√£ k√©o xu·ªëng d∆∞·ªõi c√πng", "color: green; font-weight: bold;");
        await delay(1000);

        // Click n√∫t "L·∫§Y M√É"
        const getCodeButtons = [...document.querySelectorAll("span, div")].filter(el =>
            el.textContent.trim().toUpperCase() === "L·∫§Y M√É"
        );

        if (getCodeButtons.length > 0) {
            getCodeButtons[0].click();
            console.log("%c[Konmeo Hub] ‚úÖ ƒê√£ t·ª± ƒë·ªông click n√∫t 'L·∫§Y M√É'", "color: lime; font-weight: bold;");
        } else {
            console.log("%c[Konmeo Hub] ‚ùó Kh√¥ng t√¨m th·∫•y n√∫t, c√≥ th·ªÉ t·ª± b·∫•m n√∫t n·∫øu c√≥!", "color: yellow; font-weight: bold;");
        }

        // T√¨m m√£
        const checkCode = setInterval(() => {
            if (foundCode) return;
            document.querySelectorAll("div").forEach(div => {
                const txt = div.textContent.trim();
                if (/^M√£ KM: [a-zA-Z0-9]{6,}/.test(txt)) {
                    const code = txt.split("M√£ KM: ")[1].trim();
                    console.log(`%c[Konmeo Hub] üéØ T√¨m th·∫•y m√£: ${code}`, "color: #00ffff; font-size: 16px; font-weight: bold;");
                    foundCode = true;
                    clearInterval(checkCode);
                }
            });
        }, 1000);
    }

    autoRun();
})();
